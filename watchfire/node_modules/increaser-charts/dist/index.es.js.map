{"version":3,"file":"index.es.js","sources":["../src/constants.js","../src/components/bar-chart/styles.js","../src/components/bar-chart/scroller.js","../src/utils.js","../src/components/bar-chart/bar.js","../src/components/bar-chart/label.js","../src/components/bar-chart/data-container.js","../src/components/bar-chart/index.js"],"sourcesContent":["export const DEFAULT_THEME = {\n  mainColor: 'white',\n  scrollerBackgroundColor: 'rgba(255, 255, 255, 0.15)',\n  labelFontSize: 12\n}","import { keyframes, css } from 'styled-components'\n\nconst barAnimation = (props) => keyframes`\n  to {\n    transform: translateX(${props.offset}px);\n  }\n`\n\nexport const animationStyle = css`\n  animation: ${barAnimation} 1s ease-in-out forwards;\n`","import React from 'react'\nimport styled from 'styled-components'\n\nimport { animationStyle } from './styles'\n\nconst Container = styled.div`\n  position: relative;\n  height: 20px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n`\n\nconst Line = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 6px;\n  background-color: ${props => props.theme.scrollerBackgroundColor};\n`\n\nconst Position = styled.div`\n  cursor: pointer;\n  position: absolute;\n  height: 6px;\n  background-color: ${props => props.theme.mainColor};\n  border-radius: 3px;\n  &:hover {\n    height: 8px;\n    border-radius: 4px;\n  }\n  ${animationStyle}\n`\n\nclass Scroller extends React.Component {\n  render() {\n    const { totalWidth, offset, oldOffset, width } = this.props\n    const getMargin = offset => ((totalWidth  - (offset + width)) / totalWidth) * 100\n    const periodMargin = getMargin(oldOffset)\n    if (periodMargin < 0) return null\n    \n    const periodWidth = (width * 100) / totalWidth\n    const animationOffset = getMargin(offset) - periodMargin\n    const positionStyle = { width: `${periodWidth}%`, marginLeft: `${periodMargin}%` }\n    return (\n      <Container>\n        <Line/>\n        <Position\n          offset={(animationOffset * width) / 100}\n          style={positionStyle}\n          onTouchStart={e => e.preventDefault()}\n          onDragStart={e => e.preventDefault()}\n          onMouseDown={this.onMouseDown}\n        />\n      </Container>\n    )\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return nextProps !== this.props\n  }\n\n  componentDidMount() {\n    document.addEventListener('mouseup', this.onMouseUp)\n    document.addEventListener('mousemove', this.onMouseMove)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mouseup', this.onMouseUp)\n    document.removeEventListener('mousemove', this.onMouseMove)\n  }\n\n  onMouseDown = () => {\n    this.props.onDragStart()\n  }\n\n  onMouseMove = e => {\n    const { scrolling, onDrag } = this.props\n    if (scrolling && e.movementX) {\n      onDrag(e.movementX)\n    }\n  }\n\n  onMouseUp = () => {\n    const { scrolling, onDragEnd } = this.props\n    if (scrolling) {\n      onDragEnd()\n    }\n  }\n}\n\nexport default Scroller","export const sum = arr => arr.reduce((acc, value) => acc + value, 0)","import React from 'react'\nimport styled from 'styled-components'\nimport { sum } from '../../utils'\n\nconst Text = styled.text`\n  fill: ${props => props.theme.mainColor};\n  font-size: ${props => props.theme.labelFontSize}px;\n  pointer-events: none;\n`\n\nexport default ({\n  bar,\n  index,\n  height,\n  barWidth,\n  barSpace,\n  centerBarIndex,\n  onBarSelect,\n  highest,\n  text,\n  startIndex,\n  labelFontSize\n}) => {\n  const barTotalWidth = barWidth + barSpace\n  const realIndex = index + startIndex\n  const x = barTotalWidth * index + barSpace\n  const valueToHeight = value => (value * height) / highest\n      \n  const Subbar = ({ valueBefore, value, color }) => {\n    const rectHeight = valueToHeight(value)\n    const y = height - valueToHeight(valueBefore) - rectHeight\n\n    return (\n      <rect\n        opacity={(realIndex === centerBarIndex) || !onBarSelect ? 1 : 0.6}\n        x={x}\n        y={y}\n        width={barWidth}\n        height={rectHeight}\n        fill={color}\n      />\n    )\n  }\n  const BarText = () => {\n    if (!text) return null\n    const barHeight = sum(bar.map(b => valueToHeight(b.value)))\n    const y = labelFontSize * 2 > barHeight ? height - labelFontSize : height - barHeight + labelFontSize\n    return (\n      <Text\n        width={barWidth}\n        x={x + barWidth / 2}\n        y={y}\n        dominantBaseline=\"middle\"\n        textAnchor=\"middle\"\n      >{text}</Text>\n    )\n  }\n  const Selectable = () => (\n    <rect\n      onTouchEnd={(e) => {\n        onBarSelect(realIndex)\n        e.preventDefault()\n      }}\n      onClick={() => onBarSelect(realIndex)}\n      cursor={'pointer'}\n      x={x - barSpace / 2}\n      width={barTotalWidth}\n      y={0}\n      height={height}\n      fill={'transparent'}\n    />\n  )\n\n  return (\n    <g>\n      {bar.map(({ value, color }, index) => {\n        const valueBefore = sum(bar.slice(0, index).map(b => b.value))\n        const props = { value, color, valueBefore, key: index }\n        \n        return <Subbar {...props} />\n      })}\n      <BarText/>\n      {onBarSelect && <Selectable/>}\n    </g>\n  )\n}","import styled from 'styled-components'\n\nexport default styled.p`\n  font-size: ${props => props.theme.labelFontSize * (props.selected ? 1.2 : 1)}px;\n  font-weight: ${props => props.selected ? 'bold' : undefined};\n  width: ${props => props.width}px;\n  margin-left: ${props => props.space}px;\n  text-align: center;\n  color: ${props => props.theme.mainColor};\n`","import React from 'react'\nimport styled from 'styled-components'\nimport { animationStyle } from './styles'\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n`\n\nconst DataContainer = styled.div`\n  height: 100%;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  ${animationStyle}\n`\n\nexport default ({ barTotalWidth, width, offset, oldOffset, totalWidth, startIndex, children }) => {\n  const left = totalWidth < width ? (width - totalWidth) / 2 : width + oldOffset - totalWidth + startIndex * barTotalWidth\n  const containerWidth = totalWidth - startIndex * barTotalWidth\n  const animationOffset = offset - oldOffset\n  const style = { left, width: containerWidth }\n\n  return (\n    <Wrapper>\n      <DataContainer offset={animationOffset} style={style}>\n        {children}\n      </DataContainer>\n    </Wrapper>\n  )\n}","import React from 'react'\nimport styled, { ThemeProvider } from 'styled-components'\n\nimport { DEFAULT_THEME } from '../../constants'\nimport Scroller from './scroller'\nimport Bar from './bar'\nimport Label from './label'\nimport DataContainer from './data-container'\nimport { sum } from '../../utils'\n\nconst RootContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n`\n\nconst BarsView = styled.svg`\n  height: 100%;\n  width: 100%;\n`\n\nconst LabelsContainer = styled.div`\n  height: 40px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  display: flex;\n  user-select: none;\n`\n\nconst Line = styled.div`\n  width: 100%;\n  height: 1px;\n  background-color: ${props => props.theme.mainColor};\n`\n\nexport default class BarChart extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      oldOffset: 0,\n      offset: 0,\n      scrolling: false\n    }\n  }\n\n  render() {\n    const {\n      theme,\n      bars,\n      barWidth,\n      barSpace,\n      onBarSelect,\n      centerBarIndex,\n      showScroll = true\n    } = this.props\n    const { width, height, offset, oldOffset, scrolling, totalWidth } = this.state\n    const barTotalWidth = barWidth + barSpace\n    const getStartIndex = () => {\n      const startIndex = Math.floor((totalWidth - width - oldOffset - (offset > oldOffset ? offset  - oldOffset : 0)) / barTotalWidth)\n      if (startIndex < 0) return 0\n  \n      return startIndex\n    }\n    const startIndex = getStartIndex()\n    const lastIndex = Math.ceil((totalWidth - oldOffset + (offset < oldOffset ? oldOffset - offset : 0)) / barTotalWidth)\n    const slicedBars = bars.slice(startIndex, lastIndex)\n    const highest = bars.map(b => b.items).reduce((acc, bar) => {\n      const height = sum(bar.map(b => b.value))\n      return height > acc ? height : acc\n    }, 0)\n    const completeTheme = { ...DEFAULT_THEME, ...theme }\n    const Content = () => {\n      if (!width) return null\n      const Bars = () => {\n        const barCommonProps = {\n          labelFontSize: completeTheme.labelFontSize,\n          startIndex,\n          height,\n          barWidth,\n          barSpace,\n          centerBarIndex,\n          onBarSelect,\n          highest\n        }\n        if (!height) return null\n        return slicedBars.map(({ items, text }, index) => (\n          <Bar\n            {...barCommonProps}\n            text={text}\n            bar={items}\n            index={index}\n            key={index}\n          />\n        ))\n      }\n      const Labels = () => {\n        const labels = slicedBars.map(b => b.label)\n        if (labels.every(l => !l)) return null\n        \n        return (\n          <LabelsContainer>\n            {labels.map((label, index) => (\n              <Label\n                width={barWidth}\n                space={barSpace}\n                selected={centerBarIndex === index + startIndex}\n                key={index + startIndex}\n              >\n                {label}\n              </Label>)\n            )}\n          </LabelsContainer>\n      )\n      }\n      const dataContainerProps = { barTotalWidth, width, offset, oldOffset, totalWidth, startIndex }\n      const scrollerProps = {\n        totalWidth,\n        width,\n        offset,\n        oldOffset,\n        scrolling,\n        onDragStart: () => this.setState({ scrolling: true, oldOffset: this.state.offset }),\n        onDrag: this.onScroll,\n        onDragEnd: () => this.setState({ scrolling: false })\n      }\n      return (\n        <React.Fragment>\n          <DataContainer {...dataContainerProps}>\n            <BarsView ref={el => this.barsContainer = el}>\n              <Bars/>\n            </BarsView>\n            {bars.length > 0 && <Line/>}\n            <Labels/>\n          </DataContainer>\n          {showScroll && <Scroller {...scrollerProps} />}\n        </React.Fragment>\n      )\n    }\n\n    return (\n      <ThemeProvider theme={completeTheme}>\n        <RootContainer ref={el => this.rootContainer = el}>\n          <Content/>\n        </RootContainer>\n      </ThemeProvider>\n    )\n  }\n\n  componentDidUpdate() {\n    const { height } = this.barsContainer.getBoundingClientRect()\n    if (this.state.height !== height) {\n      this.setState({ height })\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.onResize)\n    const { width } = this.rootContainer.getBoundingClientRect()\n    this.setState({ width })\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onResize)\n  }\n\n  onResize = () => {\n    const { width } = this.rootContainer.getBoundingClientRect()\n    const { height } = this.barsContainer.getBoundingClientRect()\n    this.setState({ width, height })\n  }\n\n  onScroll = (movementX) => {\n    const { width, offset, totalWidth } = this.state\n    const { barWidth, barSpace, bars, selectCenterBarOnScroll, centerBarIndex, onBarSelect } = this.props\n    const additionalOffset = (totalWidth / width) * movementX\n    const getOffset = () => {\n      const newOffset = offset - additionalOffset\n      if (newOffset < 0) return 0\n      if (newOffset + width > totalWidth) return totalWidth - width\n      return newOffset\n    }\n    const newOffset = getOffset()\n    this.setState({ offset: newOffset, oldOffset: newOffset })\n    if (selectCenterBarOnScroll) {\n      const center = totalWidth - newOffset - width / 2\n      const newCenterBarIndex = bars.findIndex((_, index) => ((index) * (barWidth + barSpace)) >= center) - 1\n      if (centerBarIndex !== newCenterBarIndex) {\n        onBarSelect(newCenterBarIndex)\n      }\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { width, offset, scrolling } = prevState\n    if (!width) return null\n\n    const { centerBarIndex, barWidth, barSpace, bars } = nextProps\n\n    const bar = barWidth + barSpace\n    const totalWidth = bars.length * bar + barSpace\n    const getNewOffsets = () => {\n      if (centerBarIndex !== undefined && !scrolling) {\n        if (totalWidth < width) {\n          return {\n            oldOffset: 0,\n            offset: 0\n          }\n        }\n        const offsetToCenter = totalWidth - bar * centerBarIndex - (width + bar) / 2\n        const getOffset = () => {\n          if (offsetToCenter < 0) return 0\n          if (offsetToCenter + width > totalWidth) return totalWidth - width\n          return offsetToCenter\n        }\n        return {\n          offset: getOffset(),\n          oldOffset: offset\n        }\n      }\n    }\n    return {\n      ...prevState,\n      ...getNewOffsets(),\n      totalWidth\n    }\n  }\n}\n"],"names":["DEFAULT_THEME","barAnimation","props","keyframes","offset","animationStyle","css","Container","styled","div","Line","theme","scrollerBackgroundColor","Position","mainColor","Scroller","onMouseDown","onDragStart","onMouseMove","scrolling","onDrag","e","movementX","onMouseUp","onDragEnd","totalWidth","oldOffset","width","getMargin","periodMargin","periodWidth","animationOffset","positionStyle","marginLeft","preventDefault","nextProps","addEventListener","removeEventListener","React","Component","sum","arr","reduce","acc","value","Text","text","labelFontSize","bar","index","height","barWidth","barSpace","centerBarIndex","onBarSelect","highest","startIndex","barTotalWidth","realIndex","x","valueToHeight","Subbar","valueBefore","color","rectHeight","y","BarText","barHeight","map","b","Selectable","slice","key","p","selected","undefined","space","Wrapper","DataContainer","children","left","containerWidth","style","RootContainer","BarsView","svg","LabelsContainer","BarChart","onResize","rootContainer","getBoundingClientRect","barsContainer","setState","onScroll","state","bars","selectCenterBarOnScroll","additionalOffset","getOffset","newOffset","center","newCenterBarIndex","findIndex","_","showScroll","getStartIndex","Math","floor","lastIndex","ceil","slicedBars","items","completeTheme","Content","Bars","barCommonProps","Labels","labels","label","every","l","dataContainerProps","scrollerProps","el","length","prevState","getNewOffsets","offsetToCenter"],"mappings":"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"}